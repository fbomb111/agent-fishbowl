name: Agent - Development Loop

on:
  schedule:
    - cron: "0 8 * * *"   # Daily at 08:00 UTC
  workflow_dispatch: {}

concurrency:
  group: agent-dev-loop
  cancel-in-progress: false

jobs:
  dev-loop:
    name: Run PO -> Engineer -> Reviewer loop
    runs-on: self-hosted
    timeout-minutes: 60
    steps:
      - uses: actions/checkout@v4
        with:
          ref: stable

      - name: Load agent env
        run: cp ~/.config/agent-fishbowl/.env .env

      - name: Run development loop
        run: scripts/run-loop.sh
