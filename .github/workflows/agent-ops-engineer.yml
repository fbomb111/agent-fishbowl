name: Agent - Operations Engineer

on:
  issues:
    types: [labeled, unlabeled]
  repository_dispatch:
    types: [agent-product-owner-complete]
  workflow_dispatch: {}

permissions:
  contents: read

jobs:
  run:
    if: >
      (github.event_name == 'issues' && github.event.action == 'labeled' &&
       (startsWith(github.event.label.name, 'priority/') || github.event.label.name == 'role/ops')) ||
      (github.event_name == 'issues' && github.event.action == 'unlabeled' &&
       github.event.label.name == 'status/blocked') ||
      github.event_name == 'repository_dispatch' ||
      github.event_name == 'workflow_dispatch'
    uses: ./.github/workflows/reusable-agent.yml
    with:
      role: ops-engineer
    secrets: inherit
